<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Exercici 6.1</title>
    <style type="text/css">
      body {
        font-family: arial, helvetica;
      }
    </style>
  </head>
  <body>
    <div id="info">M&aacute;ximo 100 caracteres</div>
    <textarea id="texto" rows="6" cols="30"></textarea>
  </body>
  <script>
    window.addEventListener("DOMContentLoaded", function () {
      let textBox = document.getElementById("texto");
      let msg = document.getElementById("info");

      textBox.addEventListener("input", function (event) {
        msg.innerText = `Quedan ${100 - textBox.value.length} caracteres.`;
        if (textBox.value.length >= 100) {
        }
        if (textBox.value.length < 100) {
        }
      });

      textBox.addEventListener("keydown", function (evento) {
        if (textBox.value.length >= 100) {
          if (
            evento.key == "Backspace" ||
            evento.key == "Delete" ||
            evento.key == "ArrowLeft" ||
            evento.key == "ArrowRight"
          ) {
            return true;
          }
          evento.preventDefault();
        }
      });

      function preventKeypress(element) {
        //Pasar el elemento al que se quiere agregar el evento.
        let permitted = [37, 39, 8, 46];

        let notPermitted = [];
        for (let i = 0; i < 222; i++) {
          if (permitted.includes(i)) {
            continue;
          }
          notPermitted[i] = i;
        }

        element.addEventListener("keydown", function (evento) {
          if (notPermitted.includes(evento.keyCode)) {
            evento.preventDefault();
            return;
          }
        });
      }
    });
  </script>
</html>
